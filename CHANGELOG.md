# 更新日志

## 2026-01-08 - 表格视图更新

### 更改内容

1. **移除所有图片**
   - 删除了卡片上的活动图片（RSS 图片链接不可用）
   - 删除了详情页的大图显示
   - 网站现在完全基于文本

2. **从卡片改为表格视图**
   - 主页现在使用表格形式显示所有活动
   - 表格列：
     - **Event Name** - 活动名称（可点击查看详情）
     - **Type** - 在线/线下标签（ONLINE / IN PERSON）
     - **Library** - 图书馆名称
     - **Date & Time** - 日期和时间
     - **Book** - 讨论的书籍（标题和作者）
     - **Details** - 查看详情链接

3. **保留的功能**
   - ✅ 搜索功能正常
   - ✅ 快速筛选（Today, Tomorrow, This Week, This Month, Next Month）
   - ✅ 高级筛选（在线/线下、按州筛选）
   - ✅ 移动端响应式（表格可横向滚动）
   - ✅ 详情页完整信息
   - ✅ 自动数据更新

### 技术改动

- 更新 `public/index.html` - 改为表格结构
- 更新 `public/css/styles.css` - 添加表格样式，移除图片样式
- 更新 `public/js/search.js` - 渲染表格行而不是卡片
- 更新 `public/event.html` - 移除图片显示

### 如何使用

本地运行：
```bash
cd public
python3 -m http.server 8000
# 访问 http://localhost:8000
```

部署方式不变，请参考 DEPLOY.md

## 2026-01-08 (Update 2) - 星期槽可视化

### 新增功能

**替换 Book 列为 Day of Week 可视化槽**

现在表格的第 5 列显示一个直观的星期可视化：
- 7 个小方格代表周一到周日
- 默认灰色，活动当天的槽是**绿色**
- 一眼就能看出活动在哪天举行

#### 视觉示例：
```
周一活动: [M✓][T][W][T][F][S][S]
周四活动: [M][T][W][T✓][F][S][S]
周日活动: [M][T][W][T][F][S][S✓]
```
（✓ = 绿色高亮）

### 为什么做这个改变？

1. **更直观** - 视觉化比文本更容易识别模式
2. **数据完整** - 每个活动都有日期，但不是所有活动都有书籍信息
3. **快速筛选** - 用户可以快速找到特定星期的活动
4. **紧凑设计** - 占用空间小，不影响表格布局

### 响应式设计

- **桌面**: 28×28px 方格，显示 M T W T F S S
- **平板**: 24×24px 方格自动缩小
- **手机**: 20×20px 方格，保持清晰可读

### 技术文件

- 新增函数: `generateWeekSlots()` in `public/js/utils.js`
- CSS 样式: `.week-slots` 和 `.week-slot` classes
- 测试页面: `test_week_slots.html`

详细说明请查看: `WEEK_SLOTS_FEATURE.md`

## 2026-01-08 (Update 3) - 隐藏过期活动

### 功能改进

**自动过滤已过期的活动**

现在网页会自动隐藏已经结束的活动，只显示未来的活动。

#### 过滤逻辑：

1. **有结束时间的活动**：如果 `end_date` 早于当前时间，则隐藏
2. **只有开始时间的活动**：假设活动持续 3 小时，如果 `start_date + 3小时` 早于当前时间，则隐藏

#### 示例：
- 今天是 2026-01-08 下午 2:00
- 活动 A：2026-01-08 上午 10:00 - 11:00 → **隐藏**（已结束）
- 活动 B：2026-01-08 下午 5:00 - 6:00 → **显示**（未开始）
- 活动 C：2026-01-10 → **显示**（未来活动）

### 好处

✅ 用户只看到相关的未来活动
✅ 减少信息干扰
✅ 自动实时更新（无需刷新页面）

### 技术实现

- 修改文件：`public/js/search.js`
- 在 `applyFilters()` 函数开头添加过期检查
- 每次筛选时自动应用
