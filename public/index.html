<!DOCTYPE html>
<html lang="en">

<head>
  <!-- Google tag (gtag.js) -->
  <script async src="https://www.googletagmanager.com/gtag/js?id=G-JKLYFEERNL"></script>
  <script>
    window.dataLayer = window.dataLayer || [];
    function gtag(){dataLayer.push(arguments);}
    gtag('js', new Date());

    gtag('config', 'G-JKLYFEERNL');
  </script>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <meta name="description"
    content="Find book club events from libraries across North America. Search and filter by date, location, and more.">
  <title>Book Club Event Finder</title>
  <link rel="stylesheet" href="css/styles.css">
</head>

<body>
  <!-- Header -->
  <header class="header">
    <div class="container">
      <div class="header-badge">
        <span class="badge-icon">âœ¨</span>
        <span class="badge-text" id="events-count">1400+ Events across North America</span>
      </div>
      <h1 class="main-title">
        Book Club <span class="highlight">Event Finder</span>
      </h1>
      <p class="subtitle">Discover and join book club events from libraries across North America</p>
    </div>
  </header>

  <!-- Search and Filters Section -->
  <section class="search-section">
    <div class="container">
      <!-- Search Box and Filter Button Row -->
      <div class="search-row">
        <div class="search-box">
          <span class="search-icon">ğŸ”</span>
          <input type="text" id="search-input" placeholder="Search events, libraries, or topics..." autocomplete="off">
        </div>
        <button class="filter-toggle" id="filter-toggle">
          <span class="filter-icon">â˜°</span>
          <span>Filters</span>
        </button>
      </div>

      <!-- Quick Filters -->
      <div class="quick-filters">
        <button class="quick-filter-btn" data-filter="today">
          <span class="btn-icon">ğŸ”¥</span>
          <span>Today</span>
        </button>
        <button class="quick-filter-btn" data-filter="tomorrow">
          <span class="btn-icon">â˜€ï¸</span>
          <span>Tomorrow</span>
        </button>
        <button class="quick-filter-btn" data-filter="bay-area">
          <span class="btn-icon">ğŸŒ‰</span>
          <span>Bay Area</span>
        </button>
        <button class="quick-filter-btn" data-filter="this-month">
          <span class="btn-icon">ğŸ“…</span>
          <span>This Month</span>
        </button>
        <button class="quick-filter-btn" data-filter="next-month">
          <span class="btn-icon">â©</span>
          <span>Next Month</span>
        </button>
      </div>

      <!-- Advanced Filters -->
      <div class="advanced-filters" id="advanced-filters">
        <div class="filters-header">
          <h3>Filters</h3>
          <button class="filters-close" id="filters-close">âœ•</button>
        </div>

        <div class="filter-section">
          <h4>Event Type</h4>
          <div class="filter-buttons" id="event-type-buttons">
            <button class="filter-option-btn active" data-value="all">
              <span class="btn-icon">ğŸŒ</span>
              <span>All Events</span>
            </button>
            <button class="filter-option-btn" data-value="online">
              <span class="btn-icon">ğŸ’»</span>
              <span>Online Only</span>
            </button>
            <button class="filter-option-btn" data-value="in-person">
              <span class="btn-icon">ğŸ“</span>
              <span>In Person</span>
            </button>
          </div>
        </div>

        <div class="filter-section">
          <h4>State / Province</h4>
          <div class="filter-buttons scrollable" id="state-buttons">
            <button class="filter-option-btn active state-btn" data-value="all">All States</button>
            <!-- State buttons will be populated dynamically -->
          </div>
        </div>
      </div>
    </div>
  </section>

  <!-- Results Info -->
  <div class="results-info" id="results-info">
    Loading events...
  </div>

  <!-- Events Table -->
  <main class="table-container">
    <div class="table-wrapper">
      <table class="events-table" id="events-table">
        <thead>
          <tr>
            <th>Event Name</th>
            <th>Type</th>
            <th>Library</th>
            <th>Date & Time</th>
            <th>Day of Week</th>
            <th>Details</th>
          </tr>
        </thead>
        <tbody id="events-container">
          <!-- Events will be rendered here -->
        </tbody>
      </table>
    </div>
  </main>

  <!-- Footer -->
  <footer class="footer">
    <div class="container">
      <p>Data updated daily from library RSS feeds Â· Last update: <span id="last-update">-</span></p>
      <p style="margin-top: 8px; font-size: 13px;">
        Built with â¤ï¸ for book lovers everywhere
      </p>
    </div>
  </footer>

  <!-- Scripts -->
  <script src="js/utils.js"></script>
  <script src="js/search.js"></script>
  <script>
    // Display last update time
    fetch('events.json')
      .then(res => res.json())
      .then(data => {
        if (data.generated_at) {
          const date = new Date(data.generated_at);
          document.getElementById('last-update').textContent = date.toLocaleString();
        }
      })
      .catch(() => { });
  </script>
</body>

</html>